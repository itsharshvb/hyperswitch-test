# OASDiff Quick Reference

## Configuration Files Created

### 1. `.oasdiff-severity-levels.yaml`
Defines severity levels for breaking change rules.
- **ERR**: Breaking changes that fail the build
- **WARN**: Non-breaking but noteworthy changes  
- **INFO**: Safe changes for documentation

### 2. `.oasdiff-err-ignore.yaml`
Suppresses specific breaking change errors.
Use sparingly and document why.

### 3. `.oasdiff-warn-ignore.yaml`
Suppresses warnings to reduce noise.
Safe to ignore documentation, example changes.

## Quick Commands

```bash
# Basic breaking change check
oasdiff breaking base.yaml revision.yaml

# With all configs (recommended)
oasdiff breaking \
  --fail-on ERR \
  --severity-levels .oasdiff-severity-levels.yaml \
  --err-ignore .oasdiff-err-ignore.yaml \
  --warn-ignore .oasdiff-warn-ignore.yaml \
  base.yaml revision.yaml

# JSON output for automation
oasdiff breaking --format json base.yaml revision.yaml | jq .

# Test specific API paths
oasdiff breaking --match-path "^/api/v1" base.yaml revision.yaml
```

## Common Rule Patterns

### Severity Levels
```yaml
# Critical breaking changes
api-path-removed-without-deprecation: ERR
request-property-became-required: ERR

# Deprecation warnings
endpoint-deprecated: WARN

# Safe additions
response-property-added: INFO
```

### Error Ignores
```yaml
# Temporary ignores (document why!)
- request-property-became-required:customer_id  # HYPER-1234

# Path-based ignores
- api-path-removed-without-deprecation:/internal/
- response-property-removed:/admin/

# Development endpoints
- api-removed-without-deprecation:/dev/
```

### Warning Ignores
```yaml
# Documentation changes (safe)
- api-operation-description-changed
- response-property-example-changed

# Non-functional additions
- response-property-added
- new-optional-request-header
```

## Integration Examples

### GitHub Actions Workflow
```yaml
- name: Check API Breaking Changes
  run: |
    oasdiff breaking \
      --fail-on ERR \
      --format githubactions \
      --severity-levels .oasdiff-severity-levels.yaml \
      --err-ignore .oasdiff-err-ignore.yaml \
      base.json current.json
```

### Local Development
```bash
# Quick check
just api-diff

# Full validation with custom config
oasdiff breaking \
  --severity-levels .oasdiff-severity-levels.yaml \
  --err-ignore .oasdiff-err-ignore-dev.yaml \
  main-api.json feature-api.json
```

## Best Practices

1. **Start strict** - Use ERR for all breaking changes initially
2. **Document ignores** - Always explain why rules are suppressed  
3. **Path-based rules** - Different strictness for public vs internal APIs
4. **Regular review** - Clean up ignore lists periodically
5. **Environment-specific** - Different configs for prod vs dev

## Troubleshooting

- **Config not found**: Check file paths are relative to working directory
- **Rules not working**: Verify rule names are exact (case-sensitive)
- **Too many warnings**: Add rules to `.oasdiff-warn-ignore.yaml`
- **Changes not detected**: Ensure JSON is valid and schemas are correct

## Files in this Repository

- `.oasdiff-config.yaml` - Original configuration (legacy)
- `.oasdiff-severity-levels.yaml` - Custom severity levels
- `.oasdiff-err-ignore.yaml` - Error suppressions
- `.oasdiff-warn-ignore.yaml` - Warning suppressions
- `OASDIFF_CONFIGURATION_REFERENCE.md` - Complete documentation
- `.oasdiff-quick-reference.md` - This quick reference