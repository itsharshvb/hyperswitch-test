# Spectral Configuration for Hyperswitch API Validation
# Minimal essential rules for OpenAPI spec linting

# Note: Basic configuration without external dependencies to avoid module resolution issues

rules:
  # Basic OpenAPI structure validation
  info-must-have-title:
    description: "Info object must have a title"
    message: "Info object must have a title"
    given: "$.info"
    severity: error
    then:
      field: "title"
      function: truthy
      
  paths-must-exist:
    description: "Paths object must exist"
    message: "OpenAPI document must have paths"
    given: "$"
    severity: error
    then:
      field: "paths"
      function: truthy
      
  # Additional rules to trigger violations
  operation-description:
    description: "Operation must have description"
    message: "All operations must have a description"
    given: "$.paths[*][*]"
    severity: warn
    then:
      field: "description"
      function: truthy
      
  schema-properties-examples:
    description: "Schema properties should have examples"
    message: "Schema properties should include examples for better documentation"
    given: "$.components.schemas..properties[*]"
    severity: warn
    then:
      field: "example"
      function: truthy
      
  required-response-schema:
    description: "Responses must have schemas"
    message: "All responses must define a schema"
    given: "$.paths[*][*].responses[*].content[*]"
    severity: error
    then:
      field: "schema"
      function: truthy